<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=GBK">
    <title></title>
  </head>
  <body>
    1. golang实现Vector<br>
    数据结构STL――golang实现vector&nbsp; from:
    仓库存储地址：https://github.com/hlccd/goSTL<br>
    <br>
    向量（Vector）是一个封装了动态大小数组的顺序容器。跟任意其它类型容器一样，它能够存放各种类型的对象。可以简单的认为，向量是一个能够
    存放任意类型的动态数组。<br>
    <br>
    &#8203;
    对于vector的实现,考虑到它是一个线性容器,其中的元素可以通过下标在O(1)的时间复杂度直接获取访问，可以考虑底层使用数组的形式实现。由于
    vector可以动态的添加和删除元素，所以需要对数组进行动态分配以满足需求。<br>
    <br>
    &#8203;
    对于golang语言来说，官方并未设计泛型，但由于interface可以充当任意类型的特性，可以使用interface类型作为泛型类型。<br>
    <br>
    原理<br>
    <br>
    &#8203;
    对于一个vector来说，它是可以动态的对元素进行添加和修改的，而如果说每一次增删元素都使得数组恰好可以容纳所有元素的话，那它在以后的每一次增删
    的过程中都需要去重新分配空间，并将原有的元素复制到新数组中，如果按照这样来操作的话，每次删减都会需要花费大量的时间去进行，将会极大的降低
    其性能。<br>
    <br>
    &#8203;
    为了提高效率，可以选择牺牲一定的空间作为冗余量，即时空权衡，通过每次扩容时多分配一定的空间，这样在后续添加时就可以减少扩容次数，而在删除元素时，
    如果冗余量不多时，可以选择不进行空间分配，仅将后续元素前移一位，同理，在中间插入元素也仅仅将其后移一位，这样可以极大减少的由于容量不足或
    超出导致的扩容缩容造成的时间开销。<br>
    扩容策略<br>
    <br>
    &#8203;
    对于动态数组扩容来说，由于其添加是线性且连续的，即每一次只会增加一个，不像bitmap一样可能需要一次添加很多的空间才能保证在其范围内，所以它的
    扩容策略相对于bitmap有所不同。<br>
    <br>
    &#8203; vector的扩容主要由两种方案：<br>
    <br>
    &nbsp;&nbsp;&nbsp;
    固定扩容：固定的去增加一定量的空间，该方案时候在数组较大时添加空间，可以避免直接翻倍导致的冗余过量问题，到由于增加量是固定的，如果需要一次扩容很
    多量的话就会比较缓慢。<br>
    &nbsp;&nbsp;&nbsp;
    翻倍扩容：将原有容量直接翻倍，该方案适合在数组不太大的适合添加空间，可以提高扩容量，增加扩容效率，但数组太大时使用的话会导致一次性增加太多空间，
    进而造成空间的浪费。<br>
    <br>
    缩容策略<br>
    <br>
    &#8203;
    对于动态数组的缩容来说，同扩容类似，由于元素的减少只会是线性且连续的，即每一次只会减少一个，不会存在由于一个元素被删去导致其他已使用的空间也需要
    被释放。所以vector的缩容方案和vector的扩容方案十分类似，即是它的逆过程：<br>
    <br>
    &nbsp;&nbsp;&nbsp;
    固定缩容：释放一个固定的空间，该方案适合在当前数组较大的时候进行，可以减缓需要缩小的量，当空间较大的时候如果采取折半缩减的话;将可能在绝大多数时
    间内都不会被采用，从而造成空间浪费。<br>
    &nbsp;&nbsp;&nbsp;
    折半缩容：将当前容量进行折半，该方案适合数组不太大的适合进行缩容，可以更快的缩小容量，但对于较大的空间来说并不会频繁使用到。<br>
    <br>
    实现<br>
    <br>
    &#8203;
    由于vector底层由动态数组实现，所以其必然包含一个数组指针，同时，利用时空权衡去减少时间开销导致实际使用空间和实际占用空间不一致，所以分别利
    用len和cap进行存储。同时，为了解决在高并发情况下的数据不一致问题，引入了并发控制锁。<br>
    <br>
    具体见vector.go:<br>
/run/media/catalyst/TOSHIBA/goworkspaces/gomontecaloUCPwuziqi/src/gostl/data_structure/vector/vector.go<br>
    分别编号：<br>
    1.&nbsp; vector向量结构体<br>
    2. vector向量容器接口<br>
    3. New（）&#8203; 创建一个vector容器并初始化，同时返回其指针<br>
    4. Iterator&nbsp; &#8203;
    以vector为接受器，返回一个包含vector中所有元素的迭代器，同时将vector中暂未使用的空间进行释放<br>
    5. Sort &#8203;
    以vector为接受器，重载了比较器中的Sort，实现了让vector利用比较器中的Sort进行排序，使用过程中将会释放vector中暂未使用的
    空间。<br>
    6. Size&nbsp; &#8203; 返回vector中当前所包含的元素个数，由于其数值必然是非负整数，所以选用了uint64。<br>
    7. Clear &#8203; 清空了vector中所承载的所有元素。<br>
    8. Empty&nbsp; &#8203; 判断vector中是否为空，通过Size()是否为0进行判断。<br>
    9. PushBack<br>
    &#8203;
    以vector为接受器，向vector尾部添加一个元素，添加元素会出现两种情况，第一种是还有冗余量，此时直接覆盖以len为下标指向的位置即可，另
    一种情况是没有冗余量了，需要对动态数组进行扩容，此时就需要利用扩容策略。<br>
    &#8203; 扩容策略上文已做描述，可返回参考，该实现过程种将两者进行了结合使用，可参考下方注释。<br>
    &#8203; 固定扩容值设为2<sup>16</sup>，翻倍扩容上限也为2<sup>16</sup>。<br>
    10. PopBack<br>
    &#8203;
    以vector向量容器做接收者，弹出容器最后一个元素,同时长度C即可，若容器为空,则不进行弹出，当弹出元素后,可能进行缩容，当容量和实际使用差值
    超过216时,容量直接减去216，否则,当实际使用长度是容量的一半时,进行折半缩容。其缩容策略可参考前方解释。<br>
    11. nsert<br>
    &#8203;
    向vector中任意位置插入一个元素，由于其位置必然是非负整数，所以选用了uint64进行表示，同时，当插入位置超出了数组范围时，将在最近的位置
    进行插入，由于不可能是负数，所以超出范围的情况只有可能是插入下标大于len，此时只需要插入尾部即可，等同于PushBack的操作。<br>
    &#8203; 对于插入的下标在范围中时，只需要将后续的一些元素后移一位即可。<br>
    &#8203; 是否需要扩容需要在开始进行判断，扩容策略同上。<br>
    12. Erase<br>
    &#8203; 删除下标为idx的元素，idx不在数组范围内时，则删除距离其最近的元素，即下标不大于0删除首部，不小于len删除尾部。<br>
    &#8203; 删除后进行缩容判断，缩容操作同上方介绍的缩容策略。<br>
    13. Reverse<br>
    &#8203; 以vector为接受器，将vector中所承载的元素逆转，同时，释放掉所有未使用的空间。<br>
    14. At<br>
    &#8203; 返回下标为idx的元素，当idx不在数组范围内时返回nil，当idx在范围内时返回对应元素。<br>
    15.Front<br>
    &#8203;
    以vector为接受器，返回vector所承载的元素中位于首部的元素，如果vector为nil或者元素数组为nil或为空，则返回nil。<br>
    16. Back<br>
    &#8203;
    以vector为接受器，返回vector所承载的元素中位于尾部的元素，如果vector为nil或者元素数组为nil或为空，则返回nil。<br>
    <h4>
      <meta http-equiv="content-type" content="text/html; charset=GBK">
      <h4>使用示例: <br>
      </h4>
      <p>/run/media/catalyst/TOSHIBA/goworkspaces/gomontecaloUCPwuziqi/src/myvector.go<br>
      </p>
    </h4>
    <br>
    <br>
    <br>
    <br>
    <br>
    <meta http-equiv="content-type" content="text/html; charset=GBK">
  </body>
</html>
